!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("d3")):"function"==typeof define&&define.amd?define(["d3"],t):e.Onboard=t(e.d3)}(this,function(e){"use strict";function t(e,t){return void 0===e?t:e}var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];n(this,e),this._handlers=t.reduce(function(e,t){return e[t]=[],e},{})}return r(e,[{key:"on",value:function(e,t){if(!(e in this._handlers))throw"No such event: "+e;return this._handlers[e].push(t),this}},{key:"off",value:function(e,t){if(!(e in this._handlers))throw"No such event: "+e;if(t){var n=this._handlers[e],r=n.indexOf(t);-1!=r&&n.splice(r,1)}else this._handlers[e]=[];return this}},{key:"fire",value:function(e){if(!(e in this._handlers))throw"No such event: "+e;for(var t=this._handlers[e],n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var s=0;s<t.length;s++)t[s].apply(this,r);return this}},{key:"destroy",value:function(){return this._handlers=null,this}}]),e}(),s=function(e,t){if("undefined"==typeof document)return t;e=e||"";var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");return r.type="text/css",r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e)),n.appendChild(r),t}("._svg_ouz24_1 {\r\n    position:absolute;\r\n    top:0;\r\n    left:0;\r\n}\r\n\r\n._bg_ouz24_13 {\r\n\r\n}\r\n\r\n._mask_ouz24_21 {\r\n\r\n}\r\n\r\n._window_ouz24_29 {\r\n    display: none;\r\n    position:absolute;\r\n    width:400px;\r\n    height:200px;\r\n    left:calc(50% - 200px);\r\n    top:calc(50% - 100px);\r\n    border-radius: 5px;\r\n    background-color: #ffffff;\r\n    box-shadow: 0 15px 20px 0 rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n._window-next-btn_ouz24_53,\r\n._window-prev-btn_ouz24_55 {\r\n    width: 100px;\r\n    height: 33px;\r\n    display: block;\r\n    position: absolute;\r\n    right:30px;\r\n    text-align: center;\r\n    bottom:30px;\r\n    padding:7px;\r\n    text-transform: uppercase;\r\n    cursor: pointer;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    font-size: 10px;\r\n    font-weight: bold;\r\n    letter-spacing: 1px;\r\n    color: #49ace2;\r\n    border: solid 2px #49ace2\r\n}\r\n\r\n._window-prev-btn_ouz24_55 {\r\n    left:30px;\r\n}",{svg:"_svg_ouz24_1",bg:"_bg_ouz24_13",mask:"_mask_ouz24_21",window:"_window_ouz24_29","window-next-btn":"_window-next-btn_ouz24_53","window-prev-btn":"_window-prev-btn_ouz24_55"}),o=function(){function t(e){n(this,t),this._options=e,this._containerEl=null,this._svgEl=null,this._stepElements=[],this._rendered=!1}return r(t,[{key:"isRendered",value:function(){return this._rendered}},{key:"render",value:function(t){return this._containerEl=e.select(t||document.body),this._renderMask(),this._rendered=!0,this}},{key:"_getViewSize",value:function(){return{width:Math.max(document.documentElement.offsetWidth,document.documentElement.clientWidth),height:Math.max(document.documentElement.offsetHeight,document.documentElement.clientHeight)}}},{key:"_renderMask",value:function(){var e=this,t=this._getViewSize();this._svgEl=this._containerEl.append("svg").attr("class",s.svg).attr("width",t.width).attr("height",t.height),this._defsEl=this._svgEl.append("defs"),this._maskEl=this._defsEl.append("mask").attr("class",s.mask).attr("id","onboarding-mask").attr("width","100%").attr("height","100%").attr("x",0).attr("y",0),this._maskBg=this._maskEl.append("rect").attr("class",s.bg).attr("x",0).attr("y",0).attr("width","100%").attr("height","100%").attr("fill","white"),this._bgEl=this._svgEl.append("rect").attr("class",s.bg).attr("width","100%").attr("height","100%").attr("x",0).attr("y",0).attr("mask","url(#onboarding-mask)").attr("fill",this._options.fillColor).attr("fill-opacity",this._options.fillOpacity),this._onWindowResize=function(){var t=e._getViewSize();e._svgEl.attr("width",t.width),e._svgEl.attr("height",t.height)},window.addEventListener("resize",this._onWindowResize)}},{key:"start",value:function(){return this._svgEl.style("display","block"),this._clearSteps(),this._renderSteps(),this}},{key:"_clearSteps",value:function(){this._stepElements.forEach(function(e){return e.remove()})}},{key:"_renderSteps",value:function(){(this._options.steps||[]).forEach(this._renderStep.bind(this))}},{key:"_renderStep",value:function(e){var t=this;e.selection.nodes().forEach(function(n){t._stepElements.push(t._renderStepElement(n,e))})}},{key:"_renderStepElement",value:function(e,t){return"circle"==(t.shape||"rectangle")?this._renderCircleMask(e,t):this._renderRectangleMask(e,t)}},{key:"_renderRectangleMask",value:function(e,t){var n=e.getBoundingClientRect();return this._maskEl.append("rect").attr("fill","black").attr("x",n.left).attr("y",n.top).attr("width",n.width).attr("stroke-width",t.shape?t.shape.offset||0:0).attr("stroke","black").attr("height",n.height)}},{key:"_renderCircleMask",value:function(e,t){var n=e.getBoundingClientRect(),r=n.left+n.width/2,i=n.top+n.height/2;this._maskEl.append("circle").attr("r",0).attr("fill","black").attr("cx",r).attr("cy",i).transition().duration(250).attr("r",t.shape.radius||n.width/2)}},{key:"stop",value:function(){return this._svgEl.style("display","none"),this}},{key:"destroy",value:function(){return this._rendered&&window.removeEventListener("resize",this._onWindowResize),this}}]),t}(),a=function(){function t(e){n(this,t),this._options=e,this._containerEl=null,this._rendered=!1}return r(t,[{key:"isRendered",value:function(){return this._rendered}},{key:"render",value:function(t){return this._containerEl=e.select(t||document.body),this._renderWindow(),this._rendered=!0,this}},{key:"_renderWindow",value:function(){this._windowEl=this._containerEl.append("div").attr("class",s.window),this._nextBtnEl=this._windowEl.append("div").attr("class",s["window-next-btn"]).html("Next"),this._prevBtnEl=this._windowEl.append("div").attr("class",s["window-prev-btn"]).html("Previous"),this._titleEl=this._windowEl.append("div").attr("class",s["window-title"])}},{key:"start",value:function(){return this._windowEl.style("display","block"),this}},{key:"stop",value:function(){return this._windowEl.style("display","none"),this}},{key:"destroy",value:function(){return this}}]),t}(),d=function(){function t(e){n(this,t),this._options=e,this._containerEl=null,this._rendered=!1,this._observable=new i([]),this._maskRenderer=new o(e),this._windowRenderer=new a(e)}return r(t,[{key:"isRendered",value:function(){return this._rendered}},{key:"render",value:function(t){return this._containerEl=e.select(t||document.body),this._maskRenderer.render(t),this._windowRenderer.render(t),this._rendered=!0,this}},{key:"start",value:function(){return this._maskRenderer.start(),this._windowRenderer.start(),this}},{key:"stop",value:function(){return this._maskRenderer.stop(),this._windowRenderer.stop(),this}},{key:"on",value:function(e,t){return this._observable.on(e,t),this}},{key:"off",value:function(e,t){return this._observable.off(e,t),this}},{key:"destroy",value:function(){return this._observable.destroy(),this}}]),t}();return function(){function e(r){n(this,e),this._options={},this._options.fillColor=t(r.fillColor,"#000000"),this._options.fillOpacity=t(r.fillOpacity,.25),this._options.steps=r.steps,this._observable=new i([]),this._onboardRenderer=new d(this._options),this.render()}return r(e,[{key:"on",value:function(e,t){return this._observable.on(e,t),this}},{key:"off",value:function(e,t){return this._observable.off(e,t),this}},{key:"destroy",value:function(){return this._observable.destroy(),this._onboardRenderer.destroy(),this._options=null,this}},{key:"render",value:function(e){return this._onboardRenderer.render(e),this}},{key:"update",value:function(e){if(!this._onboardRenderer.isRendered())throw"Can't call update() when widget is not rendered, please call .render() first.";return this._onboardRenderer.update(e),this}},{key:"start",value:function(){return this._onboardRenderer.isRendered()||this._onboardRenderer.render(),this._onboardRenderer.start(),this}},{key:"stop",value:function(){return this._onboardRenderer.isRendered()||this._onboardRenderer.render(),this._onboardRenderer.stop(),this}}]),e}()});
//# sourceMappingURL=onboard.min.js.map
