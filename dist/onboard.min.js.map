{"version":3,"file":"onboard.min.js","sources":["../src/Onboard.js","../src/utils/Observable.js","../src/MaskRenderer.js","../src/PositionResolver.js","../src/ArrowRenderer.js","../src/WindowRenderer.js","../src/OnboardRenderer.js","../src/OnboardModel.js","../src/OnboardDefaults.js"],"sourcesContent":["import Observable from \"./utils/Observable\";\nimport * as Defaults from \"./OnboardDefaults\";\nimport OnboardRenderer from \"./OnboardRenderer\";\nimport OnboardModel from \"./OnboardModel\";\n\n/**\n * @private \n * @param {*} optionValue option value \n * @param {*} defaultOptionValue default option value \n * @returns option or default option value \n */\nfunction getOptionValue(optionValue, defaultOptionValue) {\n\treturn typeof optionValue == \"undefined\" ? defaultOptionValue : optionValue;\n}\n\n/**\n * @class\n * Main onboard class\n * @param {Object} options\n */\nclass Onboard {\n\tconstructor(options) {\n\t\t/**\n\t\t * @private\n\t\t * Options property exposing widget's options\n\t\t */\n\t\tthis._options = {};\n\n\t\t/**\n\t\t * @public\n\t\t * fill color\n\t\t */\n\t\tthis._options.fillColor = getOptionValue(options.fillColor, Defaults.FILL_COLOR);\t\t\n\n\t\t/**\n\t\t * @public\n\t\t * fill opacity\n\t\t */\n\t\tthis._options.fillOpacity = getOptionValue(options.fillOpacity, Defaults.FILL_OPACITY);\n\n\t\t/**\n\t\t * @public\n\t\t * Next text\n\t\t */\n\t\tthis._options.nextText = getOptionValue(options.nextText, Defaults.NEXT_TEXT);\t\t\n\n\t\t/**\n\t\t * @public\n\t\t * Understand text\n\t\t */\n\t\tthis._options.understandText = getOptionValue(options.understandText, Defaults.UNDERSTAND_TEXT);\t\t\n\n\t\t/**\n\t\t * @public\n\t\t * animation duration\n\t\t */\n\t\tthis._options.animationDuration = getOptionValue(options.animationDuration, Defaults.ANIMATION_DURATION);\t\t\n\n\t\t/**\n\t\t * @public\n\t\t * steps\n\t\t */\n\t\tthis._options.steps = options.steps;\n\n\t\t/**\n\t\t * @private\n\t\t * observable handler\n\t\t */\n\t\tthis._observable = new Observable([\n\t\t\t\n\t\t]);\n\n\t\tthis._model = new OnboardModel(this._options);\n\n\t\t/**\n\t\t * @private\n\t\t * OnboardRenderer\n\t\t */\n\t\tthis._onboardRenderer = new OnboardRenderer(this._options, this._model);\n\n\t\tthis.render();\n\t}\n\n\t/**\n\t * Bind widget event\n\t * @param {String} event event name\n\t * @param {Function} handler event handler\n\t * @returns {Onboard} returns this widget instance\n\t */\n\ton(eventName, handler) {\n\t\tthis._observable.on(eventName, handler);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Unbind widget event\n\t * @param {String} event event name\n\t * @param {Function} [handler] event handler\n\t * @returns {Onboard} returns this widget instance\n\t */\n\toff(eventName, handler) {\n\t\tthis._observable.off(eventName, handler);\n\t\treturn this;\n\t}\t\n\n\t/**\n\t * Destroys widget\n\t * @returns {Onboard} returns this widget instance\n\t */\n\tdestroy() {\n\t\tthis._observable.destroy();\n\t\tthis._onboardRenderer.destroy();\n\t\tthis._options = null;\n\t\tthis._model.destroy();\n\n\t\treturn this;\n\t}\t\n\n\t/**\n\t * Render logic of this widget\n\t * @param {String|DOMElement} selector selector or DOM element \n\t * @returns {Onboard} returns this widget instance\n\t */\n\trender(selector) {\n\t\tthis._onboardRenderer.render(selector);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Starts onboarding\n\t * @returns {Onboard} returns this widget instance \n\t */\n\tstart() {\n\t\tthis._model.start();\n\t\treturn this;\n\t}\n\n\n\t/**\n\t * Stops\n\t * @returns {Onboard} returns this widget instance \n\t */\n\tstop() {\n\t\tthis._model.stop();\n\t\treturn this;\n\t}\t\n}\n\nexport default Onboard;\n","/**\r\n * @class\r\n * Observable class, handles binding and firing events\r\n * @param {Array} events list of events for this observable\r\n */\r\nexport default class Observable {\r\n    /**\r\n     * @param {Array} events\r\n     */\r\n    constructor(events = []) {\r\n        // create a map of handlers where each event has an array of bound handlers\r\n        this._handlers = events.reduce((acc, cur)=>{\r\n            acc[cur] = [];\r\n            return acc;\r\n        },{});\r\n    }\r\n\r\n\t/**\r\n\t * @public\r\n\t * Bind event\r\n\t * @param {String} event event name\r\n\t * @param {Function} handler event handler\r\n\t */\r\n    on(event, handler) {\r\n        if (!(event in this._handlers)) throw \"No such event: \" + event;\r\n\t\tthis._handlers[event].push(handler);\r\n\t\treturn {\r\n\t\t\tdestroy:()=>{\r\n\t\t\t\tthis.off(event, handler)\r\n\t\t\t}\r\n\t\t};\r\n    }\r\n\r\n\t/**\r\n\t * @public\r\n\t * Unbind event\r\n\t * @param {String} event event name\r\n\t * @param {Function} [handler] event handler, optional\r\n\t */\r\n    off(event, handler) {\r\n        if (!(event in this._handlers)) throw \"No such event: \" + event;\r\n\t\tif (!handler) {\r\n\t\t\tthis._handlers[event] = [];\r\n\t\t} else {\r\n\t\t\tvar handlers = this._handlers[event];\r\n\t\t\tvar index = handlers.indexOf(handler);\r\n\t\t\tif (index != -1){\r\n\t\t\t\thandlers.splice(index, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n    }\r\n\r\n\t/**\r\n\t * @public\r\n\t * Fire widget event\r\n\t * @param {String} event event name\r\n\t * @param {*} ...args event arguments\r\n\t */\r\n\tfire(event, ...args) {\r\n\t\tif (!(event in this._handlers)) throw \"No such event: \" + event;\r\n\t\tvar handlers = this._handlers[event];\r\n\t\tfor (var i = 0; i < handlers.length; i++) {\r\n\t\t\thandlers[i].apply(this, args);\r\n\t\t}\r\n\t\treturn this;\r\n    }\r\n\r\n\t/**\r\n\t * @public\r\n\t * Destorys this observable, removes events and so on \r\n\t */\r\n\tdestroy() {\r\n\t\tthis._handlers = null;\r\n\t\treturn this;\r\n    }\r\n\t\r\n}","import style from \"./Onboard.css\";\r\nimport * as d3 from \"d3\";\r\n\r\n/**\r\n * @class\r\n * Onboard class\r\n * @param {Object} options\r\n */\r\nexport default class MaskRenderer {\r\n\tconstructor(options, model) {\r\n\t\t/**\r\n\t\t * @private \r\n\t\t * Onboard options\r\n\t\t */\r\n\t\tthis._options = options;\r\n\r\n\t\t/**\r\n\t\t * @private \r\n\t\t * DOM container of this widget\r\n\t\t */\r\n\t\tthis._containerEl = null;\r\n\r\n\t\t/**\r\n\t\t * @private \r\n\t\t * Mask Element\r\n\t\t */\r\n\t\tthis._svgEl = null;\t\t\r\n\r\n\t\t/**\r\n\t\t * @private \r\n\t\t * Step elements\r\n\t\t */\r\n\t\tthis._stepElements = [];\r\n\r\n\t\t/**\r\n\t\t * @private\r\n\t\t * true if Onboard has been rendered\r\n\t\t */\r\n\t\tthis._rendered = false;\r\n\r\n\t\t/**\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._model = model;\r\n\r\n\t\tthis._onStartBinding = this._model.on(\"start\", this._onStart.bind(this));\r\n\t\tthis._onStepBinding = this._model.on(\"step\", this._onStep.bind(this));\r\n\t\tthis._onStopBinding = this._model.on(\"stop\", this._onStop.bind(this));\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * Returns whether Onboard has been rendered or not\r\n\t * @returns {boolean} true if Onboard has been rendered\r\n\t */\r\n\tisRendered() {\r\n\t\treturn this._rendered;\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * Render logic of this widget\r\n\t * @param {String|DOMElement} selector selector or DOM element \r\n\t * @returns {Onboard} returns this widget instance\r\n\t */\r\n\trender(selector) {\r\n\t\t// get container element using selector or given element\r\n\t\tthis._containerEl = d3.select(selector || document.body);\r\n\r\n\t\tthis._renderMask();\r\n\t\tthis._rendered = true;\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t_getViewSize(){\r\n\t\treturn {\r\n\t\t\twidth: Math.max(document.documentElement.offsetWidth, document.documentElement.clientWidth),\r\n\t\t\theight: Math.max(document.documentElement.offsetHeight, document.documentElement.clientHeight)\r\n\t\t}\r\n\t}\r\n\r\n\t_renderMask(){\r\n\t\tvar size = this._getViewSize();\r\n\r\n\t\t// render SVG\r\n\t\tthis._svgEl = this._containerEl.append(\"svg\")\r\n\t\t\t.attr(\"class\", style[\"svg\"])\r\n\t\t\t.attr(\"width\", size.width)\r\n\t\t\t.attr(\"height\", size.height)\r\n\r\n\t\t// defs el\r\n\t\tthis._defsEl = this._svgEl.append(\"defs\");\r\n\r\n\t\tthis._maskEl = this._defsEl.append(\"mask\")\r\n\t\t\t.attr(\"class\", style[\"mask\"])\r\n\t\t\t.attr(\"id\", \"onboarding-mask\")\r\n\t\t\t.attr(\"width\", \"100%\")\r\n\t\t\t.attr(\"height\", \"100%\")\r\n\t\t\t.attr(\"x\", 0)\r\n\t\t\t.attr(\"y\", 0)\r\n\r\n\t\tthis._maskBg = this._maskEl.append(\"rect\")\r\n\t\t\t.attr(\"class\", style[\"bg\"])\r\n\t\t\t.attr(\"x\", 0)\r\n\t\t\t.attr(\"y\", 0)\r\n\t\t\t.attr(\"width\", \"100%\")\r\n\t\t\t.attr(\"height\", \"100%\")\r\n\t\t\t.attr(\"fill\", \"white\")\r\n\r\n\t\tthis._bgEl = this._svgEl.append(\"rect\")\r\n\t\t\t.attr(\"class\", style[\"bg\"])\r\n\t\t\t.attr(\"width\", \"100%\")\r\n\t\t\t.attr(\"height\", \"100%\")\r\n\t\t\t.attr(\"x\", 0)\r\n\t\t\t.attr(\"y\", 0)\r\n\t\t\t.attr(\"mask\", \"url(#onboarding-mask)\")\r\n\t\t\t.attr(\"fill\", this._options.fillColor)\r\n\t\t\t.attr(\"fill-opacity\", this._options.fillOpacity)\r\n\r\n\t\tthis._onWindowResize = ()=>{\r\n\t\t\tvar size = this._getViewSize();\r\n\t\t\tthis._svgEl.attr(\"width\", size.width);\r\n\t\t\tthis._svgEl.attr(\"height\", size.height);\r\n\t\t}\t\r\n\r\n\t\twindow.addEventListener(\"resize\", this._onWindowResize);\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * @returns {MaskRenderer} \r\n\t */\r\n\t_onStart() {\r\n\t\tthis._svgEl.style(\"display\", \"block\");\r\n\t\treturn this;\r\n\t}\t\r\n\r\n\t_clearSteps(){\r\n\t\tthis._stepElements.forEach(element=>element.remove());\r\n\t}\r\n\r\n\t/**\r\n\t * @private\r\n\t */\r\n\t_renderStep(step){\r\n\t\tlet selection = step.selection; \r\n\t\tselection.nodes().forEach(element=>{\r\n\t\t\tthis._stepElements.push(this._renderStepElement(element, step));\r\n\t\t});\r\n\t}\r\n\r\n\t_renderStepElement(element, step){\r\n\t\tvar shape = step.shape || {\r\n\t\t\ttype:\"rectangle\"\r\n\t\t};\r\n\r\n\t\tif (element.tagName == \"path\"){\r\n\t\t\treturn this._renderPathMask(element, step);\r\n\t\t} else if (shape.type == \"circle\"){\r\n\t\t\treturn this._renderCircleMask(element, step);\r\n\t\t} else {\r\n\t\t\treturn this._renderRectangleMask(element, step);\r\n\t\t}\r\n\t}\r\n\t_getBorderRadius(el){\r\n\t\treturn parseFloat(window.getComputedStyle(el, null).getPropertyValue(\"border-top-left-radius\"));\r\n\t}\r\n\t_renderRectangleMask(element, step){\r\n\t\tvar box = element.getBoundingClientRect();\t\t\r\n\t\tvar borderRadius = this._getBorderRadius(element);\r\n\r\n\t\tvar stepEl = this._maskEl\r\n\t\t\t.append(\"rect\")\r\n\t\t\t\t.attr(\"fill\", \"black\")\r\n\t\t\t\t.attr(\"x\", box.left)\r\n\t\t\t\t.attr(\"y\", box.top)\r\n\t\t\t\t.attr(\"rx\", borderRadius)\r\n\t\t\t\t.attr(\"ry\", borderRadius)\r\n\t\t\t\t.attr(\"width\", box.width)\r\n\t\t\t\t.attr(\"fill-opacity\", 1)\r\n\t\t\t\t.attr(\"stroke-opacity\", 1)\r\n\t\t\t\t.attr(\"stroke-width\", step.shape?step.shape.offset||0:0)\r\n\t\t\t\t.attr(\"stroke\", \"black\")\r\n\t\t\t\t.attr(\"height\", box.height)\r\n\r\n\t\treturn stepEl;\r\n\t}\r\n\r\n\t_renderCircleMask(element, step){\r\n\t\tvar box = element.getBoundingClientRect();\t\t\r\n\t\tvar cx = box.left + box.width / 2;\r\n\t\tvar cy = box.top + box.height / 2;\r\n\r\n\t\tvar stepEl = this._maskEl\r\n\t\t\t.append(\"circle\")\r\n\t\t\t.attr(\"r\", step.shape.radius || box.width /2)\r\n\t\t\t.attr(\"fill\", \"black\")\r\n\t\t\t.attr(\"fill-opacity\", 1)\r\n\t\t\t.attr(\"stroke-width\", step.shape?step.shape.offset||0:0)\r\n\t\t\t.attr(\"stroke-opacity\", 1)\r\n\t\t\t.attr(\"stroke\", \"black\")\r\n\t\t\t.attr(\"cx\", cx)\r\n\t\t\t.attr(\"cy\", cy)\r\n\r\n\t\treturn stepEl;\r\n\t}\r\n\r\n\t_renderPathMask(element, step){\r\n\t\tvar svgElement = element.parentElement; \r\n\t\twhile (svgElement && svgElement.tagName != \"svg\"){\r\n\t\t\tsvgElement = svgElement.parentElement;\r\n\t\t}\r\n\r\n\t\tvar box = svgElement.getBoundingClientRect();\r\n\r\n\t\tvar stepEl = this._maskEl\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"transform\", \"translate(\"+box.left+\", \"+box.top+\")\")\r\n\t\t\t.append(\"path\")\r\n\t\t\t\t.attr(\"fill\", \"black\")\r\n\t\t\t\t.attr(\"fill-opacity\", 1)\r\n\t\t\t\t.attr(\"stroke-width\", step.shape?step.shape.offset||0:0)\r\n\t\t\t\t.attr(\"stroke\", \"black\")\r\n\t\t\t\t.attr(\"d\", d3.select(element).attr(\"d\"))\r\n\t\t\t\r\n\t\t\r\n\t\treturn stepEl;\r\n\t}\t\r\n\r\n\t/**\r\n\t * @public\r\n\t * @returns {MaskRenderer} \r\n\t */\r\n\t_onStep(step) {\r\n\t\tthis._clearSteps();\r\n\t\tthis._renderStep(step);\r\n\t\treturn this;\r\n\t}\t\r\n\r\n\t/**\r\n\t * @public\r\n\t * @returns {MaskRenderer} \r\n\t */\r\n\t_onStop() {\r\n\t\tthis._svgEl.style(\"display\", \"none\");\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * Destorys Onboard UI  \r\n\t */\r\n\tdestroy() {\r\n\t\tif (this._rendered){\r\n\t\t\twindow.removeEventListener(\"resize\", this._onWindowResize);\r\n\t\t}\r\n\r\n\t\tthis._clearSteps();\r\n\r\n\t\tthis._onStartBinding.destroy();\r\n\t\tthis._onStepBinding.destroy();\r\n\t\tthis._onStopBinding.destroy();\r\n\r\n\t\treturn this;\r\n\t}\r\n}","/**\r\n * @class\r\n */\r\nexport default class PositionResolver {\r\n\t/**\r\n\t * @public\r\n\t * @returns {Object}\r\n\t */\r\n\tgetWindowPosition(targetBox, windowBox, arrowBox) {\r\n\t\tvar position = this._getTargetPosition(targetBox, arrowBox);\r\n\t\tvar left = this._getLeftWindowPosition(position, targetBox, arrowBox, windowBox);\r\n\t\tvar top = this._getTopWindowPosition(position, targetBox, arrowBox, windowBox);\r\n\r\n\t\treturn {\r\n\t\t\tposition:position,\r\n\t\t\tleft:left, \r\n\t\t\ttop:top\r\n\t\t}\r\n\t} \t\r\n\r\n\t_getLeftWindowPosition(position, targetBox, arrowBox, windowBox){\r\n\t\treturn {\r\n\t\t\t\"left-top\":targetBox.left + targetBox.width/2 + arrowBox.width,\r\n\t\t\t\"right-top\":targetBox.left - arrowBox.width - windowBox.width,\r\n\t\t\t\"left-bottom\":targetBox.left + targetBox.width/2 + arrowBox.width,\r\n\t\t\t\"right-bottom\":targetBox.left - windowBox.width - arrowBox.width,\r\n\t\t}[position];\r\n\t}\r\n\r\n\t_getTopWindowPosition(position, targetBox, arrowBox, windowBox){\r\n\t\treturn {\r\n\t\t\t\"left-top\":targetBox.top + targetBox.height + arrowBox.height,\r\n\t\t\t\"right-top\":targetBox.top + targetBox.height/2 + arrowBox.height,\r\n\t\t\t\"left-bottom\":targetBox.top - windowBox.height - arrowBox.height,\r\n\t\t\t\"right-bottom\":targetBox.top - windowBox.height + arrowBox.height,\r\n\t\t}[position];\r\n\t}\t\r\n\r\n\tgetArrowPosition(targetBox, arrowBox) {\r\n\t\tvar position = this._getTargetPosition(targetBox, arrowBox);\r\n\t\tvar left = this._getLeftArrowPosition(position, targetBox, arrowBox);\r\n\t\tvar top = this._getTopArrowPosition(position, targetBox, arrowBox);\r\n\r\n\t\treturn {\r\n\t\t\tposition:position,\r\n\t\t\tleft:left, \r\n\t\t\ttop:top\r\n\t\t}\r\n\t}\r\n\r\n\t_getLeftArrowPosition(position, targetBox, arrowBox){\r\n\t\treturn {\r\n\t\t\t\"left-top\":targetBox.left + targetBox.width/2,\r\n\t\t\t\"right-top\":targetBox.left - arrowBox.width,\r\n\t\t\t\"left-bottom\":targetBox.left + targetBox.width/2 ,\r\n\t\t\t\"right-bottom\":targetBox.left - arrowBox.width,\r\n\t\t}[position];\r\n\t}\r\n\r\n\t_getTopArrowPosition(position, targetBox, arrowBox){\r\n\t\treturn {\r\n\t\t\t\"left-top\":targetBox.top + targetBox.height,\r\n\t\t\t\"right-top\":targetBox.top + targetBox.height/2,\r\n\t\t\t\"left-bottom\":targetBox.top - arrowBox.height,\r\n\t\t\t\"right-bottom\":targetBox.top + arrowBox.height,\r\n\t\t}[position];\r\n\t}\r\n\r\n\t_getTargetPosition(targetBox){\r\n\t\tvar point = [targetBox.left, targetBox.top];\r\n\t\tvar crossPoint = [document.documentElement.clientWidth * 0.5,document.documentElement.clientHeight*0.5];\r\n\t\tvar position = [\"left\", \"top\"];\r\n\r\n\t\t[\"right\", \"bottom\"].forEach((s, i)=>{\r\n\t\t\tif (point[i]>crossPoint[i]){\r\n\t\t\t\tposition[i] = s;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn position.join(\"-\");\r\n\t}\r\n}","import style from \"./Onboard.css\";\r\nimport * as d3 from \"d3\";\r\nimport PositionResolver from \"./PositionResolver\";\r\n\r\n/**\r\n * @class\r\n * @param {Object} options\r\n */\r\nexport default class ArrowRenderer {\r\n\tconstructor(options, model) {\r\n\t\t/**\r\n\t\t * @private \r\n\t\t * Onboard options\r\n\t\t */\r\n\t\tthis._options = options;\r\n\r\n\t\t/**\r\n\t\t * @private \r\n\t\t * DOM container of this widget\r\n\t\t */\r\n\t\tthis._containerEl = null;\t\r\n\r\n\t\t/**\r\n\t\t * @private\r\n\t\t * true if Onboard has been rendered\r\n\t\t */\r\n\t\tthis._rendered = false;\r\n\r\n\t\tthis._model = model;\r\n\t\tthis._onStartBinding = this._model.on(\"start\", this._onStart.bind(this));\r\n\t\tthis._onStepBinding = this._model.on(\"step\", this._onStep.bind(this));\r\n\t\tthis._onStopBinding = this._model.on(\"stop\", this._onStop.bind(this));\r\n\t\tthis._positionResolver = new PositionResolver();\r\n\t}\r\n\r\n\tgetArrowBox(){\r\n\t\treturn this._arrowBox;\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * Returns whether Onboard has been rendered or not\r\n\t * @returns {boolean} true if Onboard has been rendered\r\n\t */\r\n\tisRendered() {\r\n\t\treturn this._rendered;\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * Render logic of this widget\r\n\t * @param {String|DOMElement} selector selector or DOM element \r\n\t * @returns {Onboard} returns this widget instance\r\n\t */\r\n\trender(selector) {\r\n\t\t// get container element using selector or given element\r\n\t\tthis._containerEl = d3.select(selector || document.body);\r\n\r\n\t\tthis._renderArrow();\r\n\t\tthis._rendered = true;\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t_renderArrow(){\r\n\t\tthis._arrowEl = this._containerEl.append(\"div\")\r\n\t\t\t.attr(\"class\", style[\"arrow\"]+\" \"+style[\"arrow-bottom-right\"])\r\n\r\n\t\tthis._arrowBox = this._arrowEl.node().getBoundingClientRect();\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * @returns {MaskRenderer} \r\n\t */\r\n\t_onStart() {\r\n\t\tthis._arrowEl.style(\"display\", \"block\");\r\n\t\treturn this;\r\n\t}\t\r\n\r\n\t/**\r\n\t * @public\r\n\t * @returns {MaskRenderer} \r\n\t */\r\n\t_onStep(step) {\r\n\t\tvar firstNode = step.selection.nodes()[0];\r\n\t\tvar targetBox = firstNode.getBoundingClientRect();\r\n\t\tvar arrowPosition = this._positionResolver.getArrowPosition(targetBox, this._arrowBox);\r\n\r\n\t\tthis._arrowEl.transition().duration(0 /*this._options.animationDuration*/)\r\n\t\t\t.style(\"top\", arrowPosition.top+\"px\")\r\n\t\t\t.style(\"left\", arrowPosition.left+\"px\");\r\n\r\n\t\t\t// epxerimental fading when moving arrow\r\n\t\t// this._arrowEl\r\n\t\t// \t.transition(\"2\")\r\n\t\t// \t.duration(this._options.animationDuration/4)\r\n\t\t// \t.style(\"opacity\", 0)\r\n\t\t// \t.transition().duration(this._options.animationDuration/2)\r\n\t\t// \t.style(\"opacity\", 0)\r\n\t\t// \t.transition().duration(this._options.animationDuration/4)\r\n\t\t// \t.style(\"opacity\", 1);\r\n\r\n\t\tthis._arrowEl.attr(\"class\", style[\"arrow\"]+\" \"+style[\"arrow-\"+arrowPosition.position]);\r\n\r\n\t\treturn this;\r\n\t}\t\r\n\r\n\t/**\r\n\t * @public\r\n\t * @returns {MaskRenderer} \r\n\t */\r\n\t_onStop() {\r\n\t\tthis._arrowEl.style(\"display\", \"none\");\r\n\t\treturn this;\r\n\t}\t\r\n\r\n\t/**\r\n\t * @public\r\n\t * Destorys Onboard UI  \r\n\t */\r\n\tdestroy() {\r\n\t\tthis._onStartBinding.destroy();\r\n\t\tthis._onStepBinding.destroy();\r\n\t\tthis._onStopBinding.destroy();\r\n\r\n\t\tif (this._arrowEl){\r\n\t\t\tthis._arrowEl.remove();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n}","import style from \"./Onboard.css\";\r\nimport * as d3 from \"d3\";\r\nimport PositionResolver from \"./PositionResolver\";\r\nimport ArrowRenderer from \"./ArrowRenderer\";\r\n\r\n/**\r\n * @class\r\n * @param {Object} options\r\n */\r\nexport default class WindowRenderer {\r\n\tconstructor(options, model) {\r\n\t\t/**\r\n\t\t * @private \r\n\t\t * Onboard options\r\n\t\t */\r\n\t\tthis._options = options;\r\n\r\n\t\t/**\r\n\t\t * @private \r\n\t\t * DOM container of this widget\r\n\t\t */\r\n\t\tthis._containerEl = null;\t\r\n\r\n\t\t/**\r\n\t\t * @private\r\n\t\t * true if Onboard has been rendered\r\n\t\t */\r\n\t\tthis._rendered = false;\r\n\r\n\t\tthis._model = model;\r\n\r\n\t\tthis._onStartBinding = this._model.on(\"start\", this._onStart.bind(this));\r\n\t\tthis._onStepBinding = this._model.on(\"step\", this._onStep.bind(this));\r\n\t\tthis._onStopBinding = this._model.on(\"stop\", this._onStop.bind(this));\r\n\r\n\t\tthis._positionResolver = new PositionResolver();\r\n\t\tthis._arrowRenderer = new ArrowRenderer(options, model);\t\t\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * Returns whether Onboard has been rendered or not\r\n\t * @returns {boolean} true if Onboard has been rendered\r\n\t */\r\n\tisRendered() {\r\n\t\treturn this._rendered;\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * Render logic of this widget\r\n\t * @param {String|DOMElement} selector selector or DOM element \r\n\t * @returns {Onboard} returns this widget instance\r\n\t */\r\n\trender(selector) {\r\n\t\t// get container element using selector or given element\r\n\t\tthis._containerEl = d3.select(selector || document.body);\r\n\r\n\t\tthis._renderWindow();\r\n\t\tthis._arrowRenderer.render(selector);\r\n\t\tthis._rendered = true;\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t_renderWindow(){\r\n\t\tthis._windowEl = this._containerEl.append(\"div\")\r\n\t\t\t.attr(\"class\", style[\"window\"])\r\n\r\n\t\tthis._nextBtnEl = this._windowEl.append(\"div\")\r\n\t\t\t.on(\"click\", this._onNextClick.bind(this))\r\n\t\t\t.attr(\"class\", style[\"window-next-btn\"]);\r\n\r\n\t\tthis._nextBtnTextEl = this._nextBtnEl.append(\"span\")\r\n\t\t\t.attr(\"class\",style[\"window-next-btn-text\"])\r\n\t\t\t.html(this._options.nextText);\r\n\r\n\t\tthis._nextBtnIconEl = this._nextBtnEl.append(\"div\").attr(\"class\",style[\"window-btn-icon\"]+\" zmdi zmdi-long-arrow-right\");\r\n\r\n\t\tthis._prevBtnEl = this._windowEl.append(\"div\")\r\n\t\t\t.attr(\"class\", style[\"window-prev-btn\"])\r\n\t\t\t.on(\"click\", this._onPrevClick.bind(this))\r\n\t\t\t.html(this._options.prevText)\r\n\r\n\t\tthis._prevBtnEl.append(\"div\").attr(\"class\",style[\"window-btn-icon\"]+\" zmdi zmdi-long-arrow-left\");\t\t\t\r\n\r\n\t\tthis._titleEl = this._windowEl.append(\"div\")\r\n\t\t\t.attr(\"class\", style[\"window-title\"])\r\n\r\n\t\tthis._bodyEl = this._windowEl.append(\"div\")\r\n\t\t\t.attr(\"class\", style[\"window-body\"])\r\n\r\n\t\tthis._closeEl = this._windowEl.append(\"div\")\r\n\t\t\t.attr(\"class\", style[\"window-close\"] + \" zmdi zmdi-close\")\r\n\t\t\t.on(\"click\", this._onCloseClick.bind(this))\r\n\t}\r\n\r\n\t_onCloseClick(){\r\n\t\tthis._model.stop();\r\n\t}\r\n\r\n\t_onNextClick(){\r\n\t\tif (this._model.hasNext()){\r\n\t\t\tthis._model.next();\r\n\t\t} else {\r\n\t\t\tthis._model.stop();\r\n\t\t}\r\n\t}\r\n\r\n\t_onPrevClick(){\r\n\t\tthis._model.prev();\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * @returns {MaskRenderer} \r\n\t */\r\n\t_onStart() {\r\n\t\tthis._windowEl.style(\"display\", \"block\");\r\n\t\treturn this;\r\n\t}\t\r\n\r\n\t/**\r\n\t * @public\r\n\t * @returns {MaskRenderer} \r\n\t */\r\n\t_onStep(step) {\r\n\t\tthis._titleEl.html(step.title);\r\n\t\tthis._bodyEl.html(step.text);\r\n\r\n\t\tthis._prevBtnEl.classed(style[\"window-button-has-prev\"], this._model.hasPrev());\r\n\t\tthis._nextBtnEl.classed(style[\"window-button-has-next\"], this._model.hasNext());\r\n\r\n\t\tif (this._model.hasNext()){\r\n\t\t\tthis._nextBtnTextEl.html(this._options.nextText)\r\n\t\t} else {\r\n\t\t\tthis._nextBtnTextEl.html(this._options.understandText)\r\n\t\t}\r\n\r\n\t\tvar firstNode = step.selection.nodes()[0];\r\n\t\tvar targetBox = firstNode.getBoundingClientRect();\r\n\t\tvar windowBox = this._windowEl.node().getBoundingClientRect();\r\n\t\tvar windowPosition = this._positionResolver.getWindowPosition(targetBox, windowBox, this._arrowRenderer.getArrowBox());\r\n\r\n\t\tthis._windowEl.transition().duration(this._options.animationDuration)\r\n\t\t\t.style(\"left\", windowPosition.left+\"px\")\r\n\t\t\t.style(\"top\", windowPosition.top+\"px\");\r\n\t\t\t\r\n\t\tthis._windowEl.attr(\"class\", style[\"window\"]+\" \"+style[\"window-\"+windowPosition.position]);\t\t\r\n\r\n\t\treturn this;\r\n\t}\t\r\n\r\n\t/**\r\n\t * @public\r\n\t * @returns {MaskRenderer} \r\n\t */\r\n\t_onStop() {\r\n\t\tthis._windowEl.style(\"display\", \"none\");\r\n\t\treturn this;\r\n\t}\t\r\n\r\n\t/**\r\n\t * @public\r\n\t * Destorys Onboard UI  \r\n\t */\r\n\tdestroy() {\r\n\t\tthis._onStartBinding.destroy();\r\n\t\tthis._onStepBinding.destroy();\r\n\t\tthis._onStopBinding.destroy();\r\n\r\n\t\treturn this;\r\n\t}\r\n}","import Observable from \"./utils/Observable\";\r\nimport MaskRenderer from \"./MaskRenderer\";\r\nimport WindowRenderer from \"./WindowRenderer\";\r\nimport * as d3 from \"d3\";\r\n\r\n/**\r\n * @class\r\n * Onboard class\r\n * @param {Object} options\r\n */\r\nexport default class OnboardRenderer {\r\n\tconstructor(options, model) {\r\n\t\t/**\r\n\t\t * @private \r\n\t\t * Onboard options\r\n\t\t */\r\n\t\tthis._options = options;\r\n\r\n\t\t/**\r\n\t\t * @private \r\n\t\t * DOM container of this widget\r\n\t\t */\r\n\t\tthis._containerEl = null;\r\n\t\t/**\r\n\t\t * @private\r\n\t\t * true if Onboard has been rendered\r\n\t\t */\r\n\t\tthis._rendered = false;\r\n\r\n\t\t/**\r\n\t\t * @private \r\n\t\t * Model\r\n\t\t */\r\n\t\tthis._model = model;\r\n\r\n\t\t/**\r\n\t\t * @private\r\n\t\t * observable handler\r\n\t\t */\r\n\t\tthis._observable = new Observable([\r\n\t\t\t\r\n\t\t]);\t\t\r\n\r\n\t\tthis._maskRenderer = new MaskRenderer(options, model);\r\n\t\tthis._windowRenderer = new WindowRenderer(options, model);\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * Returns whether Onboard has been rendered or not\r\n\t * @returns {boolean} true if Onboard has been rendered\r\n\t */\r\n\tisRendered() {\r\n\t\treturn this._rendered;\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * Render logic of this widget\r\n\t * @param {String|DOMElement} selector selector or DOM element \r\n\t * @returns {Onboard} returns this widget instance\r\n\t */\r\n\trender(selector) {\r\n\t\t// get container element using selector or given element\r\n\t\tthis._containerEl = d3.select(selector || document.body);\r\n\r\n\t\tthis._maskRenderer.render(selector);\r\n\t\tthis._windowRenderer.render(selector);\r\n\r\n\t\tthis._rendered = true;\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Bind widget event\r\n\t * @param {String} event event name\r\n\t * @param {Function} handler event handler\r\n\t * @returns {Onboard} returns this widget instance\r\n\t */\r\n\ton(eventName, handler) {\r\n\t\tthis._observable.on(eventName, handler);\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Unbind widget event\r\n\t * @param {String} event event name\r\n\t * @param {Function} [handler] event handler\r\n\t * @returns {Onboard} returns this widget instance\r\n\t */\r\n\toff(eventName, handler) {\r\n\t\tthis._observable.off(eventName, handler);\r\n\t\treturn this;\r\n\t}\t\r\n\r\n\t/**\r\n\t * @public\r\n\t * Destorys Onboard UI  \r\n\t */\r\n\tdestroy() {\r\n\t\tthis._observable.destroy();\t\r\n\r\n\t\treturn this;\r\n\t}\r\n}","import Observable from \"./utils/Observable\";\r\n\r\n/**\r\n * @class\r\n * @param {Object} options\r\n */\r\nexport default class OnboardModel {\r\n\tconstructor(options) {\r\n\t\t/**\r\n\t\t * @private \r\n\t\t * Onboard options\r\n\t\t */\r\n\t\tthis._steps = options.steps || [];\r\n\r\n\t\tthis._currentStep = null;\r\n\t\tthis._currentStepIndex = -1;\r\n\r\n\t\t/**\r\n\t\t * @private\r\n\t\t * observable handler\r\n\t\t */\r\n\t\tthis._observable = new Observable([\r\n\t\t\t\"start\",\r\n\t\t\t\"stop\",\r\n\t\t\t\"step\"\r\n\t\t]);\t\t\r\n\t}\r\n\r\n\tgetSteps(){\r\n\t\treturn this._steps;\r\n\t}\r\n\r\n\tstart(){\r\n\t\tthis._currentStepIndex = 0;\r\n\t\tthis._currentStep = this._steps[this._currentStepIndex];\r\n\t\tthis._observable.fire(\"start\", this._currentStep, this._currentStepIndex);\r\n\t\tthis._observable.fire(\"step\", this._currentStep, this._currentStepIndex);\r\n\t}\r\n\r\n\tstop(){\r\n\t\tthis._observable.fire(\"stop\");\r\n\t\tthis._currentStep = null;\r\n\t\tthis._currentStepIndex = -1;\r\n\t}\t\r\n\r\n\tnext(){\r\n\t\tif (this.hasNext()){\r\n\t\t\tthis._currentStep = this._steps[++this._currentStepIndex];\r\n\t\t\tthis._observable.fire(\"step\", this._currentStep, this._currentStepIndex);\r\n\t\t}\r\n\t}\r\n\r\n\tprev(){\r\n\t\tif (this.hasPrev()){\r\n\t\t\tthis._currentStep = this._steps[--this._currentStepIndex];\r\n\t\t\tthis._observable.fire(\"step\", this._currentStep, this._currentStepIndex);\r\n\t\t}\r\n\t}\r\n\r\n\thasNext(){\r\n\t\treturn this._steps.length > this._currentStepIndex +1;\r\n\t}\r\n\r\n\thasPrev(){\r\n\t\treturn this._currentStepIndex > 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Bind widget event\r\n\t * @param {String} event event name\r\n\t * @param {Function} handler event handler\r\n\t * @returns {Onboard} returns this widget instance\r\n\t */\r\n\ton(eventName, handler) {\r\n\t\tthis._observable.on(eventName, handler);\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Unbind widget event\r\n\t * @param {String} event event name\r\n\t * @param {Function} [handler] event handler\r\n\t * @returns {Onboard} returns this widget instance\r\n\t */\r\n\toff(eventName, handler) {\r\n\t\tthis._observable.off(eventName, handler);\r\n\t\treturn this;\r\n\t}\t\r\n\r\n\t/**\r\n\t * @public\r\n\t * Destorys Onboard UI  \r\n\t */\r\n\tdestroy() {\r\n\t\tthis._observable.destroy();\r\n\t\tthis._currentStep = null;\r\n\r\n\t\treturn this;\r\n\t}\r\n}","/**\r\n * @public\r\n * Default fill color\r\n */\r\nexport const FILL_COLOR = \"#000000\";\r\n\r\n/**\r\n * @public\r\n * Default fill opacity\r\n */\r\nexport const FILL_OPACITY = 0.25;\r\n\r\n/**\r\n * @public\r\n * Default animation duration\r\n */\r\nexport const ANIMATION_DURATION = 200;\r\n\r\n/**\r\n * @public\r\n * Next text\r\n */\r\nexport const NEXT_TEXT = \"Next\";\r\n\r\n/**\r\n * @public\r\n * Understand text\r\n */\r\nexport const UNDERSTAND_TEXT = \"Got it\";"],"names":["getOptionValue","optionValue","defaultOptionValue","Observable","events","_handlers","reduce","acc","cur","event","handler","this","push","off","handlers","index","indexOf","splice","args","i","length","apply","MaskRenderer","options","model","_options","_containerEl","_svgEl","_stepElements","_rendered","_model","_onStartBinding","on","_onStart","bind","_onStepBinding","_onStep","_onStopBinding","_onStop","selector","d3","document","body","_renderMask","Math","max","documentElement","offsetWidth","clientWidth","offsetHeight","clientHeight","size","_getViewSize","append","attr","style","width","height","_defsEl","_maskEl","_maskBg","_bgEl","fillColor","fillOpacity","_onWindowResize","_this","addEventListener","forEach","element","remove","step","selection","nodes","_this2","_renderStepElement","shape","tagName","_renderPathMask","type","_renderCircleMask","_renderRectangleMask","el","parseFloat","window","getComputedStyle","getPropertyValue","box","getBoundingClientRect","borderRadius","_getBorderRadius","left","top","offset","cx","cy","radius","svgElement","parentElement","_clearSteps","_renderStep","removeEventListener","destroy","PositionResolver","targetBox","windowBox","arrowBox","position","_getTargetPosition","_getLeftWindowPosition","_getTopWindowPosition","_getLeftArrowPosition","_getTopArrowPosition","point","crossPoint","s","join","ArrowRenderer","_positionResolver","_arrowBox","_renderArrow","_arrowEl","node","firstNode","arrowPosition","getArrowPosition","transition","duration","WindowRenderer","_arrowRenderer","_renderWindow","render","_windowEl","_nextBtnEl","_onNextClick","_nextBtnTextEl","html","nextText","_nextBtnIconEl","_prevBtnEl","_onPrevClick","prevText","_titleEl","_bodyEl","_closeEl","_onCloseClick","stop","hasNext","next","prev","title","text","classed","hasPrev","understandText","windowPosition","getWindowPosition","getArrowBox","animationDuration","OnboardRenderer","_observable","_maskRenderer","_windowRenderer","eventName","OnboardModel","_steps","steps","_currentStep","_currentStepIndex","fire","_onboardRenderer","start"],"mappings":"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"}